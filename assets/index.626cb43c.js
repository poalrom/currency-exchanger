import{r as f,n as I,j as u,a as s,G as j,A as $,o as m,c as p,B as G,b as _,d as F,e as q,f as x,g as H}from"./vendor.8ab70689.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const K="_elementsList_1ins8_1",U="_element_1ins8_1",X="_deleteButton_1ins8_14",J="_addButton_1ins8_20",g={elementsList:K,element:U,deleteButton:X,addButton:J},Q=({Component:e})=>{const[t,r]=f.exports.useState(()=>[I()]),c=()=>{r(n=>[...n,I()])},o=n=>{r(i=>i.filter(l=>l!==n))};return u("div",{className:g.elementsList,children:[t.map(n=>u("div",{className:g.element,children:[s(e,{}),t.length>1&&s("button",{onClick:()=>o(n),className:g.deleteButton,children:s(j,{})})]},n)),s("button",{className:`is-outline is-primary fullwidth ${g.addButton}`,onClick:c,children:s($,{})})]})},W="_error_sa79c_1",Y={error:W},A=m(({id:e,label:t,initialValue:r,onChange:c,placeholder:o})=>{const[n,i]=f.exports.useState(r?r.toString():""),l=a=>{i(a.target.value),a.target.value===""?c(void 0):c(p(a.target.value,{precision:6}))};return f.exports.useEffect(()=>{const a=r==null?void 0:r.value.toString();a&&a!=="0"&&i(a)},[r==null?void 0:r.value]),u("div",{children:[t&&s("label",{htmlFor:e,children:t}),s("input",{id:e,className:"fullwidth",type:"text",inputMode:"numeric",placeholder:o,value:n,pattern:"[\\d\\s]*(\\.\\d+)?",onChange:l}),s("span",{className:Y.error,children:"Only numbers and one point can be used in this input"})]})});A.displayName="CurrencyInput";var h=(e=>(e.rate="rate",e.received="received",e))(h||{});const Z="received";function V(e,t){return()=>t(e.id,"mode",e.mode===h.rate?h.received:h.rate)}const ee="_disabledMode_10ugu_1",te={disabledMode:ee};function L(e,t){return m(r=>{const c=V(r.row,r.onChange);return s("div",{className:e===r.row.mode?"":te.disabledMode,onClick:e===r.row.mode?void 0:c,children:s(t,{...r})})})}function b(e,t,r){return m(({row:c,onChange:o,label:n})=>s(A,{id:`${e}-${c.id}`,label:n!=null?n:t,initialValue:c[e],placeholder:r,onChange:i=>o(c.id,e,i)}))}const E=L(h.received,b("received","Received","100500")),z=L(h.rate,b("rate","Rate","6.55")),S=b("fee","Fee","205"),ne="_exchangerRow_h4h7z_1",re="_exchangerInitialRow_h4h7z_6",se="_exchangerFinalRow_h4h7z_7",oe="_expression_h4h7z_12",ce="_notCentered_h4h7z_19",ie="_expressionOperator_h4h7z_23",ae="_deleteButton_h4h7z_30",d={exchangerRow:ne,exchangerInitialRow:re,exchangerFinalRow:se,expression:oe,notCentered:ce,expressionOperator:ie,deleteButton:ae},M=m(({row:e,onChange:t,onDelete:r})=>{const{id:c}=e;return u("div",{className:d.exchangerRow,children:[s("span",{className:`${d.expression} ${d.notCentered}`,children:"("}),s(E,{row:e,onChange:t}),s("span",{className:d.expressionOperator,children:"OR"}),s(z,{row:e,onChange:t}),s("span",{className:d.expression,children:") +"}),s(S,{row:e,onChange:t}),s("button",{className:`is-outline is-primary ${d.deleteButton}`,onClick:()=>r(c),children:s(G,{})})]})});M.displayName="ExchangerRow";const T=m(({row:e,onChange:t})=>u("div",{className:d.exchangerFinalRow,children:[s(E,{row:e,onChange:t}),s("span",{className:d.expressionOperator,children:"OR"}),s(z,{row:e,onChange:t})]}));T.displayName="FinalExchangerRow";const k=m(({row:e,onChange:t})=>u("div",{className:d.exchangerInitialRow,children:[s(E,{row:e,onChange:t,label:"Paid"}),s("span",{className:d.expression,children:"+"}),s(S,{row:e,onChange:t})]}));k.displayName="InitialExchangerRow";const y=p(0);function le({paid:e=y,received:t=y}){return e.value<=0||t.value<=0?y:t.divide(e)}const N=p(0);function de({paid:e=N,rate:t=N}){return e.value<=0||t.value<=0?N:e.multiply(t)}const B=p(0),ue=p(1);function he(e){const t=e[0].received,r=e[e.length-1].received;let c=p(0),o=p(1);for(const n of e.slice(0,-1))o=o.multiply(n.rate||ue),c=c.add((n.fee||B).multiply(o));return!t||!r?B:r.divide(t.add(c))}function w(){return F({id:I(),mode:Z,dispose:[]})}const R=_((e,t)=>{var o;const c=e.findIndex(n=>n.id===t.id)||1;for(let n=c;n<e.length;n++){const i=e[n],l=e[n-1];let a,v;i.mode===h.rate?(a="received",v=de({paid:l.received,rate:i.rate})):(a="rate",v=le({paid:l.received,received:i.received})),((o=i[a])==null?void 0:o.value)!==v.value&&(i[a]=v)}});function O(e,t){t.dispose.push(x(()=>{var r;return(r=t.received)==null?void 0:r.value},()=>t.mode===h.received&&R(e,t))),t.dispose.push(x(()=>{var r;return(r=t.rate)==null?void 0:r.value},()=>t.mode===h.rate&&R(e,t))),t.dispose.push(x(()=>{var r;return(r=t.fee)==null?void 0:r.value},()=>R(e,t)))}function me(){const[e]=f.exports.useState(()=>F([w(),w()])),[t]=f.exports.useState(()=>q(()=>he(e)));f.exports.useEffect(()=>{e.forEach(n=>O(e,n))},[]);const r=_((n,i,l)=>{const a=e.find(v=>v.id===n);a&&(a[i]=l)}),c=_(()=>{const n=w();O(e,n),e.splice(-1,0,n)}),o=_(n=>{const i=e.findIndex(a=>a.id===n);if(i<1||i===e.length-1)return;e[i].dispose.forEach(a=>a()),e.splice(i,1),R(e,e[i])});return{total:t,rows:e,onChange:r,onAdd:c,onDelete:o}}const pe="_converter_1br2e_1",ve="_converterRows_1br2e_7",fe="_resultRate_1br2e_12",C={converter:pe,converterRows:ve,resultRate:fe},ge=m(({total:e})=>u("div",{children:[s("p",{className:"text-hr",children:"Total"}),u("p",{className:C.resultRate,children:["Rate: ",e.get().toString()]})]})),D=m(()=>{const{rows:e,onChange:t,onAdd:r,onDelete:c,total:o}=me(),n=e[0],i=e[e.length-1],l=e.slice(1,-1);return u("fieldset",{className:C.converter,children:[s("legend",{children:"Define converter sequence"}),s(k,{row:n,onChange:t,onDelete:c},n.id),s("p",{className:"text-hr",children:"Additional exchanges"}),u("div",{className:C.converterRows,children:[l.map(a=>s(M,{row:a,onChange:t,onDelete:c},a.id)),s("button",{className:"is-outline is-primary fullwidth",onClick:r,children:s($,{})})]}),s("p",{className:"text-hr",children:"Finally received money"}),s(T,{row:i,onChange:t,onDelete:c},i.id),s(ge,{total:o})]})});D.displayName="Converter";const P=()=>s(Q,{Component:D});P.displayName="ConverterPage";const _e=()=>s("div",{className:"App",children:s(P,{})});H.createRoot(document.getElementById("root")).render(s(_e,{}));
