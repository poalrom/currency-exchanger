import{o as p,r as f,j as h,a as r,c as w,B as L,b as x,d as O,e as D,n as T,f as N,A as k,g as q}from"./vendor.e895dbcc.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const G="_error_sa79c_1",H={error:G},b=p(({id:e,label:n,initialValue:t,onChange:a,placeholder:o})=>{const[s,c]=f.exports.useState(t?t.toString():""),d=i=>{c(i.target.value),a(w(i.target.value))};return f.exports.useEffect(()=>{c((t==null?void 0:t.value.toString())||"")},[t==null?void 0:t.value]),h("div",{children:[n&&r("label",{htmlFor:e,children:n}),r("input",{id:e,className:"fullwidth",type:"text",inputMode:"numeric",placeholder:o,value:s,pattern:"[\\d\\s]*(\\.\\d{0,2})?",onChange:d}),r("span",{className:H.error,children:"Only numbers and one point can be used in this input"})]})});b.displayName="CurrencyInput";var u=(e=>(e.rate="rate",e.received="received",e))(u||{});const K="received";function U(e,n){return()=>n(e.id,"mode",e.mode===u.rate?u.received:u.rate)}const X="_disabledMode_10ugu_1",J={disabledMode:X};function F(e,n){return p(t=>{const a=U(t.row,t.onChange);return r("div",{className:e===t.row.mode?"":J.disabledMode,onClick:e===t.row.mode?void 0:a,children:r(n,{...t})})})}function I(e,n,t){return p(({row:a,onChange:o,label:s})=>r(b,{id:`${e}-${a.id}`,label:s!=null?s:n,initialValue:a[e],placeholder:t,onChange:c=>o(a.id,e,c)}))}const C=F(u.received,I("received","Received","100500")),A=F(u.rate,I("rate","Rate","6.55")),P=I("fee","Fee","205"),Q="_exchangerRow_h4h7z_1",W="_exchangerInitialRow_h4h7z_6",Y="_exchangerFinalRow_h4h7z_7",Z="_expression_h4h7z_12",V="_notCentered_h4h7z_19",ee="_expressionOperator_h4h7z_23",ne="_deleteButton_h4h7z_30",l={exchangerRow:Q,exchangerInitialRow:W,exchangerFinalRow:Y,expression:Z,notCentered:V,expressionOperator:ee,deleteButton:ne},$=p(({row:e,onChange:n,onDelete:t})=>{const{id:a}=e;return h("div",{className:l.exchangerRow,children:[r("span",{className:`${l.expression} ${l.notCentered}`,children:"("}),r(C,{row:e,onChange:n}),r("span",{className:l.expressionOperator,children:"OR"}),r(A,{row:e,onChange:n}),r("span",{className:l.expression,children:") +"}),r(P,{row:e,onChange:n}),r("button",{className:`is-outline is-primary ${l.deleteButton}`,onClick:()=>t(a),children:r(L,{})})]})});$.displayName="ExchangerRow";const z=p(({row:e,onChange:n})=>h("div",{className:l.exchangerFinalRow,children:[r(C,{row:e,onChange:n}),r("span",{className:l.expressionOperator,children:"OR"}),r(A,{row:e,onChange:n})]}));z.displayName="FinalExchangerRow";const M=p(({row:e,onChange:n})=>h("div",{className:l.exchangerInitialRow,children:[r(C,{row:e,onChange:n,label:"Paid"}),r("span",{className:l.expression,children:"+"}),r(P,{row:e,onChange:n})]}));M.displayName="InitialExchangerRow";const g=w(0);function S({paid:e=g,received:n=g,fee:t=g}){return e.value<=0||n.value<=0||t.value<0?g:n.divide(e.add(t))}const R=w(0);function te({paid:e=R,rate:n=R,fee:t=R}){return e.value<=0||n.value<=0||t.value<0?R:e.add(t).multiply(n)}function y(){return O({id:T(),mode:K,dispose:[]})}const _=x((e,n)=>{var o;const a=e.findIndex(s=>s.id===n.id)||1;for(let s=a;s<e.length;s++){const c=e[s],d=e[s-1];let i,v;c.mode===u.rate?(i="received",v=te({paid:d.received,rate:c.rate,fee:d.fee})):(i="rate",v=S({paid:d.received,received:c.received,fee:d.fee})),((o=c[i])==null?void 0:o.value)!==v.value&&(c[i]=v)}});function E(e,n){n.dispose.push(N(()=>{var t;return(t=n.received)==null?void 0:t.value},()=>n.mode===u.received&&_(e,n))),n.dispose.push(N(()=>{var t;return(t=n.rate)==null?void 0:t.value},()=>n.mode===u.rate&&_(e,n))),n.dispose.push(N(()=>{var t;return(t=n.fee)==null?void 0:t.value},()=>_(e,n)))}function re(){const[e]=f.exports.useState(()=>O([y(),y()])),[n]=f.exports.useState(()=>D(()=>S({paid:e[0].received,received:e[e.length-1].received,fee:e[0].fee})));f.exports.useEffect(()=>{e.forEach(s=>E(e,s))},[]);const t=x((s,c,d)=>{const i=e.find(v=>v.id===s);i&&(i[c]=d)}),a=x(()=>{const s=y();E(e,s),e.splice(-1,0,s)}),o=x(s=>{const c=e.findIndex(i=>i.id===s);if(c<1||c===e.length-1)return;e[c].dispose.forEach(i=>i()),e.splice(c,1),_(e,e[c])});return{total:n,rows:e,onChange:t,onAdd:a,onDelete:o}}const se="_converter_n3jd0_1",oe="_converterRows_n3jd0_5",ce="_resultRate_n3jd0_10",m={converter:se,converterRows:oe,resultRate:ce},ae=p(({total:e})=>h("div",{children:[r("p",{className:"text-hr",children:"Total"}),h("p",{className:m.resultRate,children:["Rate: ",e.get().toString()]})]})),B=p(()=>{const{rows:e,onChange:n,onAdd:t,onDelete:a,total:o}=re(),s=e[0],c=e[e.length-1],d=e.slice(1,-1);return h("fieldset",{className:m.converter,children:[r("legend",{children:"Define converter sequence"}),r("div",{className:m.initialRow,children:r(M,{row:s,onChange:n,onDelete:a},s.id)}),r("p",{className:"text-hr",children:"Additional exchanges"}),h("div",{className:m.converterRows,children:[d.map(i=>r($,{row:i,onChange:n,onDelete:a},i.id)),r("button",{className:"is-outline is-primary fullwidth",onClick:t,children:r(k,{})})]}),r("p",{className:"text-hr",children:"Finally received money"}),r("div",{className:m.finalRow,children:r(z,{row:c,onChange:n,onDelete:a},c.id)}),r(ae,{total:o})]})});B.displayName="Converter";const ie="_converterPage_3xnlv_1",de={converterPage:ie},j=()=>r("div",{className:de.converterPage,children:r(B,{})});j.displayName="ConverterPage";const le=()=>r("div",{className:"App",children:r(j,{})});q.createRoot(document.getElementById("root")).render(r(le,{}));
